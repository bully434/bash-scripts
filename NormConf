Легенда
Ох уж эти конфигурационные файлы… Хочешь сказать программе, чтобы она делала что-то раз в год, и сиди, считай, сколько там секунд в этом году. Или читаешь огромное число и не понимаешь, что это – месяц, неделя или невесть какая еще астрономическая единица. Куда удобнее ведь писать вместо непонятных чисел значения вроде «2 года 2 секунды». И каждый без калькулятора и бумажки сразу поймет, что к чему. Вот и решил Галлям разобраться с этой проблемой раз и навсегда и сделать так, чтобы все писали конфиги именно в таком формате. Но не переписывать ведь существующие программы для такой обработки? Поэтому Галлям решил размять руки и написать на любимом баше программу, которая переводила бы конфигурационные файлы из человекопонятного формата в секунды, граммы и прочие стандартные единицы. Поможем Галляму сделать жизнь программистов компании проще?

Постановка задачи
Программа принимает в качестве параметра имя конфигурационного файла в следующем формате:

time=4s

distance=8m

longtime=15h

weight=42g

 

Слева от знака равно может быть любой набор английских букв (необязательно time, distance, ...). Скрипт должен вывести "нормализованный" конфиг, все единицы должны быть приведены к одному измерению: для времени – в секундах, для расстояния – в метрах, для веса – в килограммах. Допустимые единицы измерения во входном файле:

Время: s, min, h, d

Расстояние: mm, sm, dm, m, km

Вес: mg, g, kg, t

Наличие справки и вывод для указанного файла и подобных как приведенный ниже = 10 Баллов:

time=4

distance=8

longtime=54000

weight=0.023

 

Для максимального балла обрабатываем также следующие ситуации:

time=4h 2s

weight=4t 2kg

vacation=30d - 2min + 30s

Если в какой-либо строке конфига видим несочетаемые данные, выводим информацию об ошибке с номером строки и именем некорректного параметра. Поддерживаемые арифметические операции – сложение и вычитание, если операции нет, то считаем, что единицы измерения надо складывать.

 

Примеры запуска:

normconf.sh -h

normconf.sh --help

normconf.sh filename

 

Обязательное требование для всех: отсутствие ошибок при проверке http://www.shellcheck.net/
